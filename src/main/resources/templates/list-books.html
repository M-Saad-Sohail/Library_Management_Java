<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>All Books</title>

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.4.1/css/all.css"
    />
  </head>
  <body>
    <div th:insert="components/header :: header"></div>

    <div class="container my-2">
      <!-- Search form -->
      <div class="d-flex justify-content-between align-items-center mb-3">
        <div class="dropdown">
          <button
            class="btn btn-outline-dark dropdown-toggle"
            type="button"
            data-toggle="dropdown"
          >
            Sort Books
          </button>
          <div class="dropdown-menu">
            <a class="dropdown-item" href="/books?sort=bubble"
              >Title A - Z (Bubble Sort)</a
            >
            <a class="dropdown-item" href="/books?sort=selection"
              >Title Z - A (Selection Sort)</a
            >
            <a class="dropdown-item" href="/books?sort=insertion"
              >Sort by id (Insertion Sort)</a
            >
          </div>
        </div>

        <form action="/searchBook" method="get" class="form-inline">
          <input
            type="text"
            name="keyword"
            class="form-control mr-2"
            placeholder="Search books..."
            th:value="${keyword}"
          />
          <button type="submit" class="btn btn-primary">Search</button>
          <a href="/books" class="btn btn-secondary ml-2">Reset</a>
        </form>
      </div>

      <div th:switch="${books}" class="container my-5">
        <p class="my-5">
          <a href="/add" class="btn btn-dark">
            <i class="fas fa-user-plus ml-2"> Add Book </i>
          </a>
          &nbsp;&nbsp;
          <a href="/export/all-book" class="btn btn-info">
            <i class="fas fa-file-csv ml-2"> Export CSV </i>
          </a>
        </p>

        <div class="col-md-12">
          <h2 th:case="null">No record found !!</h2>
          <div th:case="*">
            <table class="table table-bordered">
              <thead>
                <tr>
                  <th>id</th>
                  <th>ISBN</th>
                  <th>Book Name</th>
                  <th>Serial Name</th>
                  <th>Description</th>
                  <th>Detail</th>
                  <th>Edit</th>
                  <th>Delete</th>
                </tr>
              </thead>
              <tbody>
                <tr th:each="book : ${books}">
                  <td th:text="${book.id}"></td>
                  <td th:text="${book.isbn}"></td>
                  <td th:text="${book.name}"></td>
                  <td th:text="${book.serialName}"></td>
                  <td th:text="${book.description}"></td>
                  <td>
                    <a
                      th:href="@{/book/{id}(id=${book.id})}"
                      class="btn btn-info"
                      ><i class="fas fa-marker ml-2"></i
                    ></a>
                  </td>
                  <td>
                    <a
                      th:href="@{/update/{id}(id=${book.id})}"
                      class="btn btn-warning"
                      ><i class="fas fa-user-edit ml-2"></i
                    ></a>
                  </td>
                  <td>
                    <a
                      th:href="@{/remove-book/{id}(id=${book.id})}"
                      class="btn btn-danger"
                      ><i class="fas fa-user-times ml-2"></i
                    ></a>
                  </td>
                </tr>
              </tbody>
            </table>

            <div
              th:if="${books.totalPages > 0}"
              class="pagination"
              th:each="pageNumber : ${pageNumbers}"
            >
              <a
                th:href="@{/books(size=${books.size}, page=${pageNumber})}"
                th:text="${pageNumber}"
                th:class="${pageNumber==books.number + 1} ? active"
              ></a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div th:insert="components/footer :: footer"></div>

    <!-- JS dependencies for Bootstrap 4 -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
  </body>
</html>
